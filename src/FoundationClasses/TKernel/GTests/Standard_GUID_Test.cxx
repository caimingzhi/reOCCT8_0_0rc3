

#include <Standard_GUID.hpp>

#include <Standard_Failure.hpp>

#include <gtest/gtest.h>

TEST(Standard_GUID_Test, OCC669_ValidGUIDConstruction)
{

  EXPECT_NO_THROW(Standard_GUID("0000000A-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000B-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000C-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000D-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000E-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000F-0000-0000-0000-000000000000"));

  EXPECT_NO_THROW(Standard_GUID("0000000a-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000b-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000c-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000d-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000e-0000-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("0000000f-0000-0000-0000-000000000000"));

  EXPECT_NO_THROW(Standard_GUID("00000000-000A-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-000F-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-000a-0000-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-000f-0000-0000-000000000000"));

  EXPECT_NO_THROW(Standard_GUID("00000000-0000-000A-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-000F-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-000a-0000-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-000f-0000-000000000000"));

  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-000A-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-000F-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-000a-000000000000"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-000f-000000000000"));

  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000A"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000F"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000a"));
  EXPECT_NO_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000f"));
}

TEST(Standard_GUID_Test, OCC669_InvalidGUIDConstruction)
{

  EXPECT_THROW(Standard_GUID("0000000G-0000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("0000000g-0000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-000G-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-000g-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-000G-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-000g-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-000G-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-000g-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000G"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000g"), Standard_Failure);

  EXPECT_THROW(Standard_GUID("000000000000000000000000000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("0000000000000000000000000000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000000000000000000000000000000"), Standard_Failure);

  EXPECT_THROW(Standard_GUID("0000000000000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-000000000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-000000000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-00000000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("000000000-0000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("0000000-0000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-00000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-000-0000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-00000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-000-0000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-00000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-000-000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-0000-0000000000000"), Standard_Failure);
  EXPECT_THROW(Standard_GUID("00000000-0000-0000-0000-00000000000"), Standard_Failure);

  EXPECT_THROW(Standard_GUID(""), Standard_Failure);
}

TEST(Standard_GUID_Test, OCC669_GUIDFormatting)
{

  Standard_GUID aGUID1("00000000-0000-0000-0000-000000000000");
  Standard_GUID aGUID2("0000000A-000B-000C-000D-00000000000E");
  Standard_GUID aGUID3("0000000a-000b-000c-000d-00000000000e");

  Standard_GUID aGUID4("0000000A-000B-000C-000D-00000000000E");
  EXPECT_EQ(aGUID2, aGUID4);

  EXPECT_EQ(aGUID2, aGUID3);

  EXPECT_NE(aGUID1, aGUID2);
}

TEST(Standard_GUID_Test, ConstexprConstructionAndComparison)
{

  constexpr Standard_GUID aZeroGUID;
  static_assert(aZeroGUID == Standard_GUID(), "Default-constructed GUIDs should be equal");

  constexpr Standard_GUID
    aGUID1(0x12345678, 0x1234, 0x5678, 0x9ABC, 0xDE, 0xF0, 0x12, 0x34, 0x56, 0x78);
  constexpr Standard_GUID
    aGUID2(0x12345678, 0x1234, 0x5678, 0x9ABC, 0xDE, 0xF0, 0x12, 0x34, 0x56, 0x78);
  constexpr Standard_GUID
    aGUID3(0x12345678, 0x1234, 0x5678, 0x9ABC, 0xDE, 0xF0, 0x12, 0x34, 0x56, 0x79);

  static_assert(aGUID1 == aGUID2, "GUIDs with same components should be equal");
  static_assert(aGUID1.IsSame(aGUID2), "IsSame should return true for equal GUIDs");
  static_assert(aGUID1 != aGUID3, "GUIDs with different components should not be equal");
  static_assert(aGUID1.IsNotSame(aGUID3), "IsNotSame should return true for different GUIDs");

  constexpr Standard_UUID aUUID = aGUID1.ToUUID();
  static_assert(aUUID.Data1 == 0x12345678, "ToUUID Data1 should match");
  static_assert(aUUID.Data2 == 0x1234, "ToUUID Data2 should match");
  static_assert(aUUID.Data3 == 0x5678, "ToUUID Data3 should match");

  constexpr Standard_GUID aGUIDFromUUID(aUUID);
  static_assert(aGUIDFromUUID == aGUID1, "GUID from UUID should equal original");

  EXPECT_EQ(aGUID1, aGUID2);
  EXPECT_NE(aGUID1, aGUID3);
  EXPECT_EQ(aGUIDFromUUID, aGUID1);
}
